<!DOCTYPE html>
<html lang="en-us">
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta http-equiv="X-UA-Compatible" content="ie=edge" />
  <meta itemprop="name" content="desmo" />
  <meta itemprop="description" content="Random Ideas" />

  <link rel="apple-touch-icon" sizes="180x180" href="https://desmodrone.github.io/apple-touch-icon.png"/>
  <link rel="icon" type="image/png" sizes="32x32" href="https://desmodrone.github.io/favicon-32x32.png" />
  <link
    rel="icon"
    type="image/png"
    sizes="16x16"
    href="https://desmodrone.github.io/favicon-16x16.png"
  />
  <link
    rel="shortcut icon"
    href="https://desmodrone.github.io/favicon.ico"
  />
  <link rel="stylesheet" href="https://desmodrone.github.io/style.css"/>
  
  <title>16 Rustlings Generics</title>
  

  
  <link rel="alternate" type="application/rss+xml" title="RSS" href="https://desmodrone.github.io/rss.xml">
  

  <body id="page">

	
<header id="site-header" class="animated slideInUp faster">
  <div class="hdr-wrapper section-inner">
    <div class="hdr-left">
      <div class="site-branding">
        <a href="https:&#x2F;&#x2F;desmodrone.github.io">desmo</a>
      </div>
      <nav class="site-nav hide-in-mobile">
            
        
        <a href="https://desmodrone.github.io/posts">posts</a>
        
        <a href="https://desmodrone.github.io/about">about</a>
        
        <a href="https://desmodrone.github.io/work">work</a>
        
      </nav>
    </div>
    <div class="hdr-right hdr-icons">
      <span class="hdr-social hide-in-mobile">
        

<a href="https:&#x2F;&#x2F;twitter.com&#x2F;desmodrone_" target="_blank" rel="noopener me"
   title="twitter">
  
  <svg xmlns="http://www.w3.org/2000/svg" class="feather" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M23 3a10.9 10.9 0 0 1-3.14 1.53 4.48 4.48 0 0 0-7.86 3v1A10.66 10.66 0 0 1 3 4s-4 9 5 13a11.64 11.64 0 0 1-7 2c9 5 20 0 20-11.5a4.5 4.5 0 0 0-.08-.83A7.72 7.72 0 0 0 23 3z"></path></svg>
  
</a>

<a href="https:&#x2F;&#x2F;github.com&#x2F;desmodrone" target="_blank" rel="noopener me"
   title="github">
  
  <svg xmlns="http://www.w3.org/2000/svg" class="feather" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37 0 0 0-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44 0 0 0 20 4.77 5.07 5.07 0 0 0 19.91 1S18.73.65 16 2.48a13.38 13.38 0 0 0-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07 0 0 0 5 4.77a5.44 5.44 0 0 0-1.5 3.78c0 5.42 3.3 6.61 6.44 7A3.37 3.37 0 0 0 9 18.13V22"></path></svg>
  
</a>

<a href="mailto:erick@apexwins.com" target="_blank" rel="noopener me"
   title="email">
  
  <svg xmlns="http://www.w3.org/2000/svg" class="feather" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"></path><polyline points="22,6 12,13 2,6"></polyline></svg>
  
</a>


      </span>
      <button id="menu-btn" class="hdr-btn" title="Menu">
        <svg
          xmlns="http://www.w3.org/2000/svg"
          width="24"
          height="24"
          viewBox="0 0 24 24"
          fill="none"
          stroke="currentColor"
          stroke-width="2"
          stroke-linecap="round"
          stroke-linejoin="round"
          class="feather feather-menu"
        >
          <line x1="3" y1="12" x2="21" y2="12"></line>
          <line x1="3" y1="6" x2="21" y2="6"></line>
          <line x1="3" y1="18" x2="21" y2="18"></line>
        </svg>
      </button>
    </div>
  </div>
</header>
<div id="mobile-menu" class="animated fast">
  <ul>
    
    <li><a href="https://desmodrone.github.io/posts">posts</a></li>
    
    <li><a href="https://desmodrone.github.io/about">about</a></li>
    
    <li><a href="https://desmodrone.github.io/work">work</a></li>
    
  </ul>
</div>

	
	

		
<main class="site-main section-inner animated fadeIn faster">
  <article class="thin">
	<header class="post-header">
	  <div class="post-meta">
		
		<span>Aug 16, 2023</span>
		<small> - 
<span class="reading-time" title="Estimated read time">
  
  4 min read
  
</span>
</small>
		
            
	  </div>
	  <h1>16 Rustlings Generics</h1>
	</header>

	<div class="content">
        
	  <h1 id="generics">Generics</h1>
<h3 id="from-the-readme">From the README</h3>
<p>Generics is the topic of generalizing types and functionalities to broader cases.
This is extremely useful for reducing code duplication in many ways, but can call for rather involving syntax.
Namely, being generic requires taking great care to specify over which types a generic type is actually considered valid.
The simplest and most common use of generics is for type parameters.</p>
<h2 id="further-information">Further information</h2>
<ul>
<li><a href="https://doc.rust-lang.org/stable/book/ch10-01-syntax.html">Generic Data Types</a></li>
<li><a href="https://doc.rust-lang.org/rust-by-example/generics/bounds.html">Bounds</a></li>
</ul>
<h2 id="generics1-rs">Generics1.rs</h2>
<pre data-lang="rust" class="language-rust "><code class="language-rust" data-lang="rust">&#x2F;&#x2F; This shopping list program isn&#x27;t compiling!
&#x2F;&#x2F; Use your knowledge of generics to fix it.

&#x2F;&#x2F; Execute `rustlings hint generics1` or use the `hint` watch subcommand for a hint.

&#x2F;&#x2F; I AM NOT DONE

fn main() {
    let mut shopping_list: Vec&lt;?&gt; = Vec::new();
    shopping_list.push(&quot;milk&quot;);
}
</code></pre>
<p>Our instructions tells to make this code compile using generics. We clearly have a question mark out of place, so what do we put there? Let's first look at our errors to see if we get any additional information.</p>
<h2 id="generics1-rs-errors">Generics1.rs errors</h2>
<pre><code>⚠️  Compiling of exercises&#x2F;generics&#x2F;generics1.rs failed! Please try again. Here&#x27;s the output:
error: expected identifier, found `&gt;`
 --&gt; exercises&#x2F;generics&#x2F;generics1.rs:9:33
  |
9 |     let mut shopping_list: Vec&lt;?&gt; = Vec::new();
  |         -----------------       ^ expected identifier
  |         |
  |         while parsing the type for `mut shopping_list`

error: aborting due to previous error
</code></pre>
<p>Not much to see here. We see what we already knew. Alright so how do we solve this issue?</p>
<h2 id="generics1-rs-solution">Generics1.rs Solution</h2>
<p>It seems like the easiest way to solve this exercise is to give the compiler what it's asking for, the <code>identifier</code> which in this case should be a <code>&amp;str</code> like this:</p>
<pre data-lang="rust" class="language-rust "><code class="language-rust" data-lang="rust">fn main() {
    let mut shopping_list: Vec&lt;&amp;str&gt; = Vec::new();
    shopping_list.push(&quot;milk&quot;);
}
</code></pre>
<p>By specifying <code>&amp;str</code> as the type parameter for the <code>Vec&lt;T&gt;</code>, we are utilizing Rust's generics mechanism. In Rust, <code>Vec&lt;T&gt;</code> is a generic type where <code>T</code> can be any type. In our solution, <code>T</code> is explicitly set to <code>&amp;str</code>, making the type of the vector <code>Vec&lt;&amp;str&gt;</code>. This demonstrates the power and flexibility of generics, allowing us to define a collection that can hold specific types of data, in this case, string slices.</p>
<p>and with that we are compiling!</p>
<h2 id="generics2-rs">Generics2.rs</h2>
<pre data-lang="rust" class="language-rust "><code class="language-rust" data-lang="rust">&#x2F;&#x2F; This powerful wrapper provides the ability to store a positive integer value.
&#x2F;&#x2F; Rewrite it using generics so that it supports wrapping ANY type.

&#x2F;&#x2F; Execute `rustlings hint generics2` or use the `hint` watch subcommand for a hint.

&#x2F;&#x2F; I AM NOT DONE

struct Wrapper {
    value: u32,
}

impl Wrapper {
    pub fn new(value: u32) -&gt; Self {
        Wrapper { value }
    }
}

#[cfg(test)]
mod tests {
    use super::*;

    #[test]
    fn store_u32_in_wrapper() {
        assert_eq!(Wrapper::new(42).value, 42);
    }

    #[test]
    fn store_str_in_wrapper() {
        assert_eq!(Wrapper::new(&quot;Foo&quot;).value, &quot;Foo&quot;);
    }
}
</code></pre>
<p>In this exercise we are being asked to refactor this code to be able to handle any type instead of just positive integers.</p>
<h2 id="generics2-rs-errors">Generics2.rs Errors</h2>
<pre data-lang="rust" class="language-rust "><code class="language-rust" data-lang="rust">⚠️  Compiling of exercises&#x2F;generics&#x2F;generics2.rs failed! Please try again. Here&#x27;s the output:
error[E0308]: mismatched types
  --&gt; exercises&#x2F;generics&#x2F;generics2.rs:27:33
   |
27 |         assert_eq!(Wrapper::new(&quot;Foo&quot;).value, &quot;Foo&quot;);
   |                    ------------ ^^^^^ expected `u32`, found `&amp;str`
   |                    |
   |                    arguments to this function are incorrect
   |
note: associated function defined here
  --&gt; exercises&#x2F;generics&#x2F;generics2.rs:11:12
   |
11 |     pub fn new(value: u32) -&gt; Self {
   |            ^^^ ----------

error[E0308]: mismatched types
  --&gt; exercises&#x2F;generics&#x2F;generics2.rs:27:9
   |
27 |         assert_eq!(Wrapper::new(&quot;Foo&quot;).value, &quot;Foo&quot;);
   |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
   |         |
   |         expected `u32`, found `&amp;str`
   |         expected because this is `u32`
   |
   = note: this error originates in the macro `assert_eq` (in Nightly builds, run with -Z macro-backtrace for more info)

error: aborting due to 2 previous errors
</code></pre>
<p>In the errors we see problems with our tests, because they are not handling generics so let's fix that</p>
<h2 id="generic2-rs-solution">Generic2.rs Solution</h2>
<p>Let's start by updating our struct to handle any kind of value, not just a specific type.</p>
<pre data-lang="rust" class="language-rust "><code class="language-rust" data-lang="rust">
struct Wrapper&lt;T&gt; {
    value: T,
}
</code></pre>
<p>Here, instead of saying our <code>value</code> is a specific type (like <code>u32</code> or <code>String</code>), we're using <code>T</code>. Think of <code>T</code> as a placeholder that says, &quot;Hey, I can be any type you want!&quot; It's like when you have a toy where you can swap out the pieces; <code>T</code> is our swappable piece.</p>
<p>By writing <code>&lt;T&gt;</code> next to <code>Wrapper</code>, we're telling Rust, &quot;This <code>Wrapper</code> can work with many types, and we're going to call the type we're working with <code>T</code>.&quot; It's a common thing you'll see in Rust, and while <code>T</code> is just a convention (we could use other letters or names), it's widely used to mean &quot;some type.&quot;</p>
<p>With this change, our <code>Wrapper</code> is now flexible and can wrap around any type of value.</p>
<p>Now let's work on the <code>impl</code> block or the method which we have to also change to be able to handle generic values.</p>
<pre data-lang="rust" class="language-rust "><code class="language-rust" data-lang="rust">impl&lt;T&gt; Wrapper&lt;T&gt; {
    pub fn new(value: u32) -&gt; Self {
        Wrapper { value }
    }
}
</code></pre>
<p>Let's start with the signature where we have to add the <code>&lt;T&gt;</code> to the <code>impl&lt;T&gt;</code> so we can use the generic value in <code>Wrapper</code>. Next we also have to add the <code>T</code> to <code>Wrapper&lt;T&gt;</code>  to make it match our struct.</p>
<p>Finally we have to fix our <code>new()</code> function to pass in a generic type and not a <code>u32</code> as a <code>value:</code></p>
<pre data-lang="rust" class="language-rust "><code class="language-rust" data-lang="rust">    pub fn new(value: T) -&gt; Self {
</code></pre>
<p>This should be it, let's save and see what happens.</p>
<pre><code>🎉 🎉  The code is compiling! 🎉 🎉
</code></pre>
<p>Yes, we're compiling, we've successfully refactored from only accepting <code>u32</code>'s  to accepting any type.</p>
<h1 id="conclusion">Conclusion</h1>
<p>The exercises on generics provide a hands-on introduction to one of Rust's powerful features: the ability to write code that operates on a variety of types. Generics enable us to write flexible and reusable code without sacrificing performance. Through the exercises, we've seen how to refactor specific types into generic ones, allowing our code to handle a broader range of use cases.</p>

	</div>
	<hr class="post-end">
	<footer class="post-info">
    
	  <p>
		<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-tag meta-icon"><path d="M20.59 13.41l-7.17 7.17a2 2 0 0 1-2.83 0L2 12V2h10l8.59 8.59a2 2 0 0 1 0 2.82z"></path><line x1="7" y1="7" x2="7" y2="7"></line></svg>
		
		
		<span class="tag"><a href="https://desmodrone.github.io/tags/rust/">rust</a></span>
		
		<span class="tag"><a href="https://desmodrone.github.io/tags/generics/">generics</a></span>
		
		<span class="tag"><a href="https://desmodrone.github.io/tags/methods/">methods</a></span>
		
		<span class="tag"><a href="https://desmodrone.github.io/tags/rustlings/">rustlings</a></span>
		
		<span class="tag"><a href="https://desmodrone.github.io/tags/vecs/">vecs</a></span>
		
		<span class="tag"><a href="https://desmodrone.github.io/tags/vectors/">vectors</a></span>
		
		<span class="tag"><a href="https://desmodrone.github.io/tags/impl/">impl</a></span>
		
		
    </p>
    
    <p><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-file-text"><path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path><polyline points="14 2 14 8 20 8"></polyline><line x1="16" y1="13" x2="8" y2="13"></line><line x1="16" y1="17" x2="8" y2="17"></line><polyline points="10 9 9 9 8 9"></polyline></svg>949 Words</p>
    
    <p><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-calendar"><rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect><line x1="16" y1="2" x2="16" y2="6"></line><line x1="8" y1="2" x2="8" y2="6"></line><line x1="3" y1="10" x2="21" y2="10"></line></svg>2023-08-16</p>
    
	</footer>
  </article>
    
  
  <div class="post-nav thin">
	
	
  </div>

  
</main>

	  </div>
	  
	  



<footer id="site-footer" class="section-inner thin animated fadeIn faster">
  <p>&copy; 2023 <a href="https:&#x2F;&#x2F;desmodrone.github.io">erick</a> &#183; <a href="https://creativecommons.org/licenses/by-nc/4.0/" target="_blank" rel="noopener">CC BY-NC 4.0</a></p>
  <p>Made with <a href="https://www.getzola.org" target="_blank" rel="noopener">Zola</a> &#183; Theme <a href="https://github.com/VersBinarii/hermit_zola" target="_blank" rel="noopener">Hermit_Zola</a>
	
	&#183; <a href="https://desmodrone.github.io/rss.xml" target="_blank" title="rss"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-rss"><path d="M4 11a9 9 0 0 1 9 9"></path><path d="M4 4a16 16 0 0 1 16 16"></path><circle cx="5" cy="19" r="1"></circle></svg></a>
	
  </p>
</footer>




	</div>
	
	<script src="https://desmodrone.github.io/js/main.js"></script>

	<!-- Math rendering -->
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.11.1/dist/katex.min.css" integrity="sha384-zB1R0rpPzHqg7Kpt0Aljp8JPLqbXI3bhnPWROx27a9N0Ll6ZP/+DiW/UqRcLbRjq" crossorigin="anonymous">
    <script defer src="https://cdn.jsdelivr.net/npm/katex@0.11.1/dist/katex.min.js" integrity="sha384-y23I5Q6l+B6vatafAwxRu/0oK/79VlbSz7Q9aiSZUvyWYIYsd+qj+o24G5ZU2zJz" crossorigin="anonymous"></script>
    <script defer src="https://cdn.jsdelivr.net/npm/katex@0.11.1/dist/contrib/auto-render.min.js" integrity="sha384-kWPLUVMOks5AQFrykwIup5lo0m3iMkkHrD0uJ4H5cjeGihAutqP0yW0J6dpFiVkI" crossorigin="anonymous"
        onload="renderMathInElement(document.body, { delimiters: [ {left: '$$', right: '$$', display: true}, {left: '$', right: '$', display: false}, {left: '\\[', right: '\\]', display: true}, {left: '\\(', right: '\\)', display: false}]});"></script>

    
		<link href="https://unpkg.com/highlightjs-badge/highlightjs/styles/railscasts.css" rel="stylesheet">
		<!-- https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@10.1.1/build/styles/  for min version -->
		<script src="https://unpkg.com/highlightjs-badge/highlightjs/highlight.pack.js"></script>
		<script src="https://unpkg.com/highlightjs-badge/highlightjs-badge.min.js"></script>
		<script>
			var pres = document.querySelectorAll("pre>code");
			for (var i = 0; i < pres.length; i++) {
				hljs.highlightBlock(pres[i]);
			}
		</script>
		
			<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js"></script>
			<script>
				var options = {
					copyIconClass: "gg-clipboard",
					checkIconClass: "gg-check"
				};
				window.highlightJsBadge(options);
			</script>
		

	

	
	<script src="https://desmodrone.github.io/js/main.js"></script>

    
    

	
    <!-- Global Site Tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-9MNTYXYNHK"></script>
    <script>
     window.dataLayer = window.dataLayer || [];
     function gtag(){dataLayer.push(arguments);}
     gtag('js', new Date());
     gtag('config', 'G-9MNTYXYNHK');
    </script>
    
  </body>
</html>
